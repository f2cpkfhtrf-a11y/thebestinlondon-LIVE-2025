#!/bin/bash

echo "🚀 DEPLOYING TO CLOUDFLARE PAGES - STEP BY STEP"
echo "=============================================="
echo ""
echo "Chrome should be open at: Cloudflare Pages Create"
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "STEP 1: CONNECT GITHUB"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "In Chrome:"
echo "  1. Click 'Connect to Git' button"
echo "  2. Click 'GitHub'"
echo ""
read -p "✅ Done? Press Enter..."
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "STEP 2: SELECT REPOSITORY"  
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "  1. Find: f2cpkfhtrf-a11y/thebestinlondon-LIVE-2025"
echo "  2. Click on it"
echo "  3. Click 'Begin setup'"
echo ""
read -p "✅ Done? Press Enter..."
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "STEP 3: BUILD CONFIGURATION"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "Enter EXACTLY these settings:"
echo ""
echo "  Project name: thebestinlondon"
echo "  Production branch: main"
echo "  Framework preset: Next.js"
echo "  Build command: npm run build"
echo "  Build output: .next"
echo ""
read -p "✅ All entered? Press Enter..."
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "STEP 4: ENVIRONMENT VARIABLES (CRITICAL!)"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "⚠️  CRITICAL: Your site won't work without this!"
echo ""
echo "  1. Scroll down to 'Environment variables'"
echo "  2. Click 'Add variable'"
echo "  3. Variable name:"
echo ""
echo "     NEXT_PUBLIC_GOOGLE_PLACES_KEY"
echo ""
echo "  4. Variable value (COPY THIS EXACTLY):"
echo ""
echo "     AIzaSyCOYUi9A598QJGWk7hZK0_6_ojdvSNhZhw"
echo ""
echo "  5. Click 'Save' or press Enter"
echo ""
read -p "✅ Environment variable added? Press Enter..."
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "STEP 5: DEPLOY!"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "  1. Scroll to bottom"
echo "  2. Click 'Save and Deploy' (big blue button)"
echo ""
read -p "✅ Clicked 'Save and Deploy'? Press Enter..."
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "⏳ BUILD IN PROGRESS"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "Watch the build in your browser!"
echo ""
echo "You'll see:"
echo "  • Initializing build environment"
echo "  • Cloning repository"
echo "  • Installing dependencies (1-2 min)"
echo "  • Building application (1-2 min)"
echo "  • Deploying to Cloudflare's network"
echo "  • ✅ Success!"
echo ""
echo "⏱️  Total time: 2-4 minutes"
echo ""
read -p "⏳ Press Enter when you see 'Success' in browser..."
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "🎉 DEPLOYMENT COMPLETE!"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "Your site is LIVE at:"
echo ""
echo "  https://thebestinlondon.pages.dev"
echo ""
echo "Opening in browser..."
sleep 2
open "https://thebestinlondon.pages.dev"
echo ""
echo "✅ Site opened!"
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "🎊 YOU'RE LIVE!"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "✅ 459 restaurants live"
echo "✅ All features working"
echo "✅ Auto-deploys on git push"
echo "✅ Daily refresh at 2 AM"
echo ""
echo "🚀 NEXT: Connect your custom domain?"
echo ""
read -p "Want to connect thebestinlondon.co.uk now? (y/n): " connect_domain
echo ""
if [ "$connect_domain" = "y" ] || [ "$connect_domain" = "Y" ]; then
    echo "Opening custom domain settings..."
    open "https://dash.cloudflare.com/9947c88df88e197e6588e6f5fdb734a6/pages/view/thebestinlondon/domains"
    echo ""
    echo "In the browser:"
    echo "  1. Click 'Set up a custom domain'"
    echo "  2. Enter: thebestinlondon.co.uk"
    echo "  3. Click 'Continue'"
    echo "  4. Cloudflare will configure DNS automatically!"
    echo ""
else
    echo "No problem! You can do this anytime from:"
    echo "Project → Custom domains → Set up a custom domain"
fi
echo ""
echo "🎉 CONGRATULATIONS! Your site is LIVE!"
echo ""
