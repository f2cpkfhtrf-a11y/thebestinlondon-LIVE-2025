#!/bin/bash

# Cloudflare Pages Project Creation
# Account: Hassant05@hotmail.com
# Domain: thebestinlondon.co.uk

echo "ğŸš€ CREATING CLOUDFLARE PAGES PROJECT"
echo "===================================="
echo ""

# Open the GitHub connection page
echo "ğŸ“± Opening Cloudflare Pages GitHub connection..."
open "https://dash.cloudflare.com/9947c88df88e197e6588e6f5fdb734a6/pages/new"

echo ""
echo "âœ… Page opened in browser!"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ¯ STEP-BY-STEP: Connect GitHub & Deploy"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Step 1: Click 'Connect to Git' (blue button)"
echo ""
read -p "âœ… Done? Press Enter..."
echo ""
echo "Step 2: Click 'GitHub' option"
echo ""
read -p "âœ… Done? Press Enter..."
echo ""
echo "Step 3: If asked, click 'Install & Authorize' or 'Configure'"
echo ""
read -p "âœ… Done? Press Enter..."
echo ""
echo "Step 4: Select repository: f2cpkfhtrf-a11y/thebestinlondon-LIVE-2025"
echo ""
read -p "âœ… Done? Press Enter..."
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ”§ BUILD CONFIGURATION"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Enter these EXACT settings:"
echo ""
echo "  Project name: thebestinlondon"
echo "  Production branch: main"
echo "  Framework preset: Next.js"
echo "  Build command: npm run build"
echo "  Build output directory: .next"
echo ""
read -p "âœ… All settings entered? Press Enter..."
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ”‘ ENVIRONMENT VARIABLES (CRITICAL!)"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "BEFORE deploying, add environment variable:"
echo ""
echo "1. Scroll down to 'Environment variables'"
echo "2. Click 'Add variable'"
echo "3. Enter:"
echo ""
echo "   Variable name: NEXT_PUBLIC_GOOGLE_PLACES_KEY"
echo ""
echo "4. Value: (checking your .env.local file...)"
echo ""

# Get the API key from .env.local
if [ -f ~/.env.local ] || [ -f ~/Desktop/thebestinlondon/.env.local ]; then
    API_KEY=$(grep "NEXT_PUBLIC_GOOGLE_PLACES_KEY" ~/Desktop/thebestinlondon/.env.local 2>/dev/null | cut -d '=' -f2 | tr -d '"' | tr -d "'")
    if [ -n "$API_KEY" ]; then
        echo "   Value: $API_KEY"
        echo ""
        echo "   âš ï¸  COPY THIS VALUE EXACTLY! âš ï¸"
    else
        echo "   âŒ Could not find API key in .env.local"
        echo "   ğŸ“ Check: ~/Desktop/thebestinlondon/.env.local"
    fi
else
    echo "   âŒ .env.local file not found"
    echo "   ğŸ“ Check: ~/Desktop/thebestinlondon/.env.local"
fi

echo ""
read -p "âœ… Environment variable added? Press Enter..."
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸš€ READY TO DEPLOY!"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Click 'Save and Deploy' (blue button at bottom)"
echo ""
read -p "âœ… Clicked? Press Enter..."
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "â³ BUILD IN PROGRESS"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Your site is building now! This takes 2-3 minutes."
echo ""
echo "You'll see:"
echo "  â€¢ Initializing..."
echo "  â€¢ Cloning repository..."
echo "  â€¢ Installing dependencies..."
echo "  â€¢ Building application..."
echo "  â€¢ Deploying..."
echo "  â€¢ âœ… Success!"
echo ""
echo "When build completes, you'll get a URL:"
echo "  https://thebestinlondon.pages.dev"
echo ""
read -p "â³ Press Enter when build is COMPLETE and shows SUCCESS..."
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ‰ DEPLOYMENT COMPLETE!"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "Your site is now LIVE!"
echo ""
echo "Testing your site now..."
open "https://thebestinlondon.pages.dev"
echo ""
echo "âœ… Opened in browser!"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ”— CONNECT CUSTOM DOMAIN"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "To use thebestinlondon.co.uk:"
echo ""
echo "1. In Cloudflare Pages, go to your project"
echo "2. Click 'Custom domains' tab"
echo "3. Click 'Set up a custom domain'"
echo "4. Enter: thebestinlondon.co.uk"
echo "5. Click 'Continue'"
echo "6. Cloudflare will configure DNS automatically!"
echo ""
read -p "Want to do this now? Press Enter (or Ctrl+C to skip)..."
echo ""
echo "Opening custom domain settings..."
open "https://dash.cloudflare.com/9947c88df88e197e6588e6f5fdb734a6/pages/view/thebestinlondon/domains"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸŠ YOU'RE LIVE!"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "âœ… Site deployed successfully"
echo "âœ… Available at: https://thebestinlondon.pages.dev"
echo "âœ… Auto-deploys on every git push"
echo "âœ… Daily data refresh configured (2 AM)"
echo ""
echo "ğŸš€ All done! Your restaurant directory is LIVE!"
echo ""
