#!/bin/bash

# Cloudflare Pages Project Creation
# Account: Hassant05@hotmail.com
# Domain: thebestinlondon.co.uk

echo "🚀 CREATING CLOUDFLARE PAGES PROJECT"
echo "===================================="
echo ""

# Open the GitHub connection page
echo "📱 Opening Cloudflare Pages GitHub connection..."
open "https://dash.cloudflare.com/9947c88df88e197e6588e6f5fdb734a6/pages/new"

echo ""
echo "✅ Page opened in browser!"
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "🎯 STEP-BY-STEP: Connect GitHub & Deploy"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "Step 1: Click 'Connect to Git' (blue button)"
echo ""
read -p "✅ Done? Press Enter..."
echo ""
echo "Step 2: Click 'GitHub' option"
echo ""
read -p "✅ Done? Press Enter..."
echo ""
echo "Step 3: If asked, click 'Install & Authorize' or 'Configure'"
echo ""
read -p "✅ Done? Press Enter..."
echo ""
echo "Step 4: Select repository: f2cpkfhtrf-a11y/thebestinlondon-LIVE-2025"
echo ""
read -p "✅ Done? Press Enter..."
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "🔧 BUILD CONFIGURATION"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "Enter these EXACT settings:"
echo ""
echo "  Project name: thebestinlondon"
echo "  Production branch: main"
echo "  Framework preset: Next.js"
echo "  Build command: npm run build"
echo "  Build output directory: .next"
echo ""
read -p "✅ All settings entered? Press Enter..."
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "🔑 ENVIRONMENT VARIABLES (CRITICAL!)"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "BEFORE deploying, add environment variable:"
echo ""
echo "1. Scroll down to 'Environment variables'"
echo "2. Click 'Add variable'"
echo "3. Enter:"
echo ""
echo "   Variable name: NEXT_PUBLIC_GOOGLE_PLACES_KEY"
echo ""
echo "4. Value: (checking your .env.local file...)"
echo ""

# Get the API key from .env.local
if [ -f ~/.env.local ] || [ -f ~/Desktop/thebestinlondon/.env.local ]; then
    API_KEY=$(grep "NEXT_PUBLIC_GOOGLE_PLACES_KEY" ~/Desktop/thebestinlondon/.env.local 2>/dev/null | cut -d '=' -f2 | tr -d '"' | tr -d "'")
    if [ -n "$API_KEY" ]; then
        echo "   Value: $API_KEY"
        echo ""
        echo "   ⚠️  COPY THIS VALUE EXACTLY! ⚠️"
    else
        echo "   ❌ Could not find API key in .env.local"
        echo "   📍 Check: ~/Desktop/thebestinlondon/.env.local"
    fi
else
    echo "   ❌ .env.local file not found"
    echo "   📍 Check: ~/Desktop/thebestinlondon/.env.local"
fi

echo ""
read -p "✅ Environment variable added? Press Enter..."
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "🚀 READY TO DEPLOY!"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "Click 'Save and Deploy' (blue button at bottom)"
echo ""
read -p "✅ Clicked? Press Enter..."
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "⏳ BUILD IN PROGRESS"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "Your site is building now! This takes 2-3 minutes."
echo ""
echo "You'll see:"
echo "  • Initializing..."
echo "  • Cloning repository..."
echo "  • Installing dependencies..."
echo "  • Building application..."
echo "  • Deploying..."
echo "  • ✅ Success!"
echo ""
echo "When build completes, you'll get a URL:"
echo "  https://thebestinlondon.pages.dev"
echo ""
read -p "⏳ Press Enter when build is COMPLETE and shows SUCCESS..."
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "🎉 DEPLOYMENT COMPLETE!"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "Your site is now LIVE!"
echo ""
echo "Testing your site now..."
open "https://thebestinlondon.pages.dev"
echo ""
echo "✅ Opened in browser!"
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "🔗 CONNECT CUSTOM DOMAIN"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "To use thebestinlondon.co.uk:"
echo ""
echo "1. In Cloudflare Pages, go to your project"
echo "2. Click 'Custom domains' tab"
echo "3. Click 'Set up a custom domain'"
echo "4. Enter: thebestinlondon.co.uk"
echo "5. Click 'Continue'"
echo "6. Cloudflare will configure DNS automatically!"
echo ""
read -p "Want to do this now? Press Enter (or Ctrl+C to skip)..."
echo ""
echo "Opening custom domain settings..."
open "https://dash.cloudflare.com/9947c88df88e197e6588e6f5fdb734a6/pages/view/thebestinlondon/domains"
echo ""
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo "🎊 YOU'RE LIVE!"
echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo ""
echo "✅ Site deployed successfully"
echo "✅ Available at: https://thebestinlondon.pages.dev"
echo "✅ Auto-deploys on every git push"
echo "✅ Daily data refresh configured (2 AM)"
echo ""
echo "🚀 All done! Your restaurant directory is LIVE!"
echo ""
